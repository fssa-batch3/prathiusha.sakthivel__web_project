<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../assets/css/login1.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css"
        integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w=="
        crossorigin="anonymous" referrerpolicy="no-referrer">
    <title>Login</title>
</head>

<body>
    <div class="bg">
        <!-- background -->

        <form id="loginpage" action="">

            <div class="mhd">

                <img class="img" src="../assets/image/mainlogo.png" height="150px" width="250px" alt="img"><br><br>
                <p class="para"> Username</p>
                </label><input name="username" type="text" id="username" required>
                <p class="para1"> Email</p>
                <input name="email" type="email" id="email" required>
                <p class="para2"> Password</p>
                <input name="password" type="password" id="password" required>
                <button class="but" type="submit">Log-in</button>
                
                <div class="or">
                    <p>Don't have an Account? <a href="../html/signup.html">Sign-upâ†’</a></p>
                </div>


                <!-- icon -->
                <div class="icon">
                    <i class="fa-brands fa-facebook"></i>
                    <i class="fa-brands fa-instagram"></i>
                    <i class="fa-brands fa-linkedin"></i>
                </div>
            </div>
        </form>
    </div>


    <script>

        // converting string into array of objects
        const checklogin = document.getElementById("loginpage");

        checklogin.onsubmit = e => {

            e.preventDefault();

            const username = document.getElementById("username").value;
            const email = document.getElementById("email").value;
            const password = document.getElementById("password").value;

            const localdata = JSON.parse(localStorage.getItem("user_records"))

            let success;

            localdata.find(el =>{

           
            
                if ((el["email"] === email) && (el["password"] === password)) {
                   let active_user = el;
                   console.log(active_user);
                   localStorage.setItem("active_user",JSON.stringify(active_user))
                  return success = 1;
                
                }
                else{
                    return success = 0;
                }
          
        })
            if (success) {
                alert("login successful");
                localStorage.setItem('data', email)
                window.location.href = "./signup.html";
            } else {
                alert("login failure");
            }
        }
    </script>
</body>

</html>