<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../assets/css/profilepage.css">
</head>

<body>
    <!-- outer_container -->
    <div class="outer_container">
        <!-- header_container -->
        <div class="header_container">
            <a href="../index.html">Home</a>
        </div>
        <!-- right_container -->
        <div class="right_container">
            <div class="profile_image">
                <img src="../assets/image/userprofileimg.jpg" alt="profile_image">
            </div>
            <!-- Edit-Profile -->
            <div class="edit">
                <button>Edit-Profile</button>
            </div>
            <br><br>
            <!-- Delete Account -->
            <div class="details">
                <button id="delete">Delete Account</button>
            </div>
            <br><br>
            <!-- Save -->
            <div>
                <button id="save">Save</button>
            </div>
            <br><br>
            <div>
                <button id="next"><a href="../html/veges.html">Next</a></button>
            </div>
        </div>


        <form>
            <div class="form_div">
                <!-- heading -->
                <h1>Account</h1>

                <!-- fname and lname -->
                <div class="profile_form">

                    <div class="fname_container">
                        <label>Firstname</label><br>
                        <input type="text" placeholder="" id="firstname">
                    </div>

                    <div class="lname_container">
                        <label>Lasttname</label><br>
                        <input type="text" placeholder="" id="lastname">
                    </div>
                </div>

                <!-- email -->

                <div class="email_container">
                    <label>Email</label><br>
                    <input type="email" placeholder="" id="email" disabled>
                </div>


                <!-- city and country -->

                <div class="profile_form2">

                    <div class="city_container">
                        <label>City</label><br>
                        <input type="text" placeholder="" id="city">
                    </div>

                    <div class="country_container">
                        <label>Country</label><br>
                        <input type="text" placeholder="" id="country">
                    </div>
                </div>

                <!-- address -->
                <div class="address_container">
                    <label>Address</label><br>
                    <input type="text" placeholder="" id="address">
                </div>

                <!-- occupation and phonenumber -->


                <div class="profile_form3">

                    <div class="occupation_container">
                        <label>Occupation</label><br>
                        <input type="text" placeholder="" id="occupation">
                    </div>

                    <div class="number_container">
                        <label>MobileNumber</label><br>
                        <input type="telephone" placeholder="" id="number">
                    </div>
                </div>
            </div>

        </form>

    </div>



    <script>

        let users = JSON.parse(localStorage.getItem('user_records'));
        let profile_arr = JSON.parse(localStorage.getItem('data'));
        for (let i = 0; i < users.length; i++) {
            document.getElementById("firstname").value = users[i]["Firstname"];
            document.getElementById("lastname").value = users[i]["lastname"];
            document.getElementById("email").value = users[i]["email"];
        }


        let check;
        users.find(userobj => {
            if (userobj["email"] == profile_arr["email"] && userobj["password"] == profile_arr["password"]) {
                firstname.value = userobj["Firstname"]
                lastname.value = userobj["lastname"]
                document.getElementById("email").value = userobj["email"]
                return check = userobj;
            }
        })

        document.getElementById("save").addEventListener("click", (e) => {
            console.log(check)

            check["Firstname"] = document.getElementById("firstname").value;
            check["lastname"] = document.getElementById("lastname").value;
            console.log(check)

        
            localStorage.setItem("user_records", JSON.stringify(users));
            console.log(users);
        })

        document.getElementById("delete").addEventListener("click", (e) => {
            let num = users.indexOf(check);
            users.splice(num, 1);
            localStorage.setItem("user_records", JSON.stringify(users));


        })
    </script>

</body>

</html>