<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>seller registration</title>
  <link rel="stylesheet" href="../assets/css/seller_register-2.css">
</head>

<body>
<!--   header -->
<header>

  <img class="logo" src="../assets/image/mainlogo.png" height="70px" width="150px" alt="img">

  <div class="menu-bar">

    <div class="main">
      <a href="../index.html">Home </a>

      <a class="about" href="html/about.html">About </a>

      <a class="login" href="./html/sellerpage.html">Seller</a>

      <!-- <a class="register" href="./html/profilepage.html">My Profile</a> -->

    </div>
  </div>

</header>

<main>
  <div class="container">
      <form action="">
          <label for="img">
Image url:<input type="text" id="image">
</label>
<br >
<br >
          <label for="Tittle">
 Title:<input type="text" id="titlename">
</label>
<br >
<br >
          <label for="price">
Price:<input id="price">
</label>
<br >
<br >
          <label for="rate">
Rating:<input type="text" id="ratings">
</label>
<br >
<br >
          <button onclick="createproduct()">Create</button>
<br >
<br >
          <button onclick="delete_product()">Delete</button>
<br >
<br >
          <button onclick="updateproduct()">Update</button>
<br >
<br >
      </form>

      <table>
          <thead>
              <th>Id</th>
              <th>Name</th>
              <th>Image</th>
              <th>Price</th>
              <th>Update</th>

          </thead>
          <tbody class="table_product">
          </tbody>
      </table>
  </div>

</main>
<script>
//create   product//

const product = JSON.parse(localStorage.getItem('seller_create_product')) ?? [];
function createproduct() {
    const product_create = {}

    const image = document.getElementById("image").value
    const titlename = document.getElementById("titlename").value
    const price = document.getElementById("price").value
    const ratings = document.getElementById("ratings").value

    product_create.image = image;
    product_create.titlename = titlename;
    product_create.price = price;
    product_create.ratings = ratings;
    product_create.product_id = product.length;

    product.push(product_create);
    localStorage.setItem("seller_create_product", JSON.stringify(product))
}

//delete product//
function delete_product() {
    const user_product = JSON.parse(localStorage.getItem("seller_create_product"));
    for (let i = 0; i < user_product.length; i++) {
        if (document.getElementById("titlename").value == user_product[i].titlename) {
            user_product.splice(i, 1)
            localStorage.setItem("seller_create_product", JSON.stringify(user_product));
        }
    }
}

//update product//
let output = "";
const append_div = document.querySelector(".table_product");

   product.forEach(item => {
   output += `

<tr>
   <td>${item.product_id}</td>
   <td>${item.titlename}</td>
   <td class="td-img"><img src="${item.image}"></td>
   <td>${item.price}</td>
   <td><button onclick="product_update(${item.product_id})">Update</button></td>
</tr>`
    append_div.innerHTML = output;
});

function product_update(id) {
    product.find((obj) => {

        if (obj.product_id == id) {
            document.getElementById("image").value = obj.image;
            document.getElementById("titlename").value = obj.titlename;
            document.getElementById("price").value = obj.price;
            document.getElementById("ratings").value = obj.ratings;
        }
    });
}

function updateproduct() {
    const image = document.getElementById("image").value;
    const title = document.getElementById("titlename").value;
    const price = document.getElementById("price").value;
    const rating = document.getElementById("ratings").value;

      product.find((obj) => {

        if (title == obj.titlename) {

            obj.image = image;
            obj.titlename = title;
            obj.price = price;
            obj.ratings = rating;
        }
    })

    localStorage.setItem("seller_create_product", JSON.stringify(product));
}
</script>

</body>

</html>