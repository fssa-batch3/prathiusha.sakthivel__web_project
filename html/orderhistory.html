<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>order history</title>
    <link rel="stylesheet" href="../assets/css/orderhistory.css">
</head>

<body>
    <header>
        <img class="logo" src="../assets/image/mainlogo.png" height="80px" width="250px" alt="img">

        <div class="menu-bar">
            <div class="search_box">
                <input type="text" id="search" placeholder="search">
            </div>

            <ul class="main">
                <li class="down"><a class="hdg" href="../index.html">Home </a></li>

                <li class="down"><a class="hdg" href="../html/about.html">About</a></li>

                <li><a class="hdg" href="../html/profilepage.html">Profile</a></li>

            </ul>
        </div>
    </header>

    <main>
        <!-- borderbox -->
        <h1>Purchase History</h1>

        <div class="outer_div" id="outer_div">
            <!-- <div class="borderbox">
        
                <div class="tomato">
                    <img class="tomato1" src="../assets/image/tomato.jpg" alt="img">
                    <h2>Fresh Organic Tomato</h2>
                    <h3>Quantity:1</h3>
                    <h4>₹10 Per kg</h4>

                </div>


                <div class="price">
                    <h2 id="product">Price Details:-</h2>
                    <div class="order">
                        <p id="order">Order Price : 10</p>
                        <p id="total_count1">Total:10</p>
                    </div>
                </div>
                

            </div>


    
            <div class="profile_box">
                <div class="profile_image">
                    <img id="user_profile" src="../assets/image/userprofileimg.jpg" alt="profile image">
                    <p id="user_name">Prathiusha Sakthivel</p>
                </div>
                <div class="details">
                    <div class="email">
                        <p>Email</p>
                        <p>prathiusha@gmail.com</p>
                    </div>
                    <div class="address">
                        <p>Address</p>
                        <p>1/243-KKR nagar,Main road,chennai.</p>
                    </div>
                    <div class="phone">
                        <p>Phone</p>
                        <p>9876543210</p>
                    </div>
                </div>

            </div> -->


        </div>
    </main>

    <script>

        let orderget=JSON.parse(localStorage.getItem("order"));

        orderget.find((el) =>{

        let border_div = document.createElement("div")
        border_div.setAttribute("class", "borderbox")
        document.querySelector(".outer_div").append(border_div);

        let next_div = document.createElement("div")
        next_div.setAttribute("class", "tomato")
        border_div.append(next_div);

        let product_image = document.createElement("img")
        product_image.setAttribute("class", "tomato1")
        product_image.setAttribute("src",el["image"])
        next_div.append(product_image);

        let h2 = document.createElement("h2")
        h2.innerHTML = el["titlename"]
        next_div.append(h2);

        let h3 = document.createElement("h3")
        h3.innerHTML = "Quantity : 1"
        next_div.append(h3);

        let h4 = document.createElement("h4")
        h4.innerHTML = "₹" + el["price"] + " " +"Per kg"
        next_div.append(h4);

        let productdetails_div = document.createElement("div")
        productdetails_div.setAttribute("class", "price")
        border_div.append(productdetails_div);

        let heading2 = document.createElement("h2")
        heading2.setAttribute("id", "product")
        heading2.innerHTML = "Price Details:-"
        productdetails_div.append(heading2);

        let order_detail = document.createElement("div")
        order_detail.setAttribute("class", "order")
        productdetails_div.append(order_detail);

        let order_para = document.createElement("p")
        order_para.setAttribute("id", "order")
        order_para.innerHTML = "₹" + el["price"]+ " " +"Per kg"
        order_detail.append(order_para);

        let total_para = document.createElement("p")
        total_para.setAttribute("id", "total_count1")
        total_para.innerHTML = "₹" + el["price"]
        order_detail.append(total_para)

    });

    let profile_userdetails=JSON.parse(localStorage.getItem("buyerdetails"))??[]

    // let last_user=JSON.parse(localStorage.getItem("data"))
    let last_user_details=JSON.parse(localStorage.getItem("user_records"));
    let last_email=localStorage.getItem("data");
    // console.log(last_email,"nklj")


        //profile//
last_user_details.filter(item => {
    if(last_email==item.email){
      
   

        let profile_div = document.createElement("div")
        profile_div.setAttribute("class", "profile_box")
        document.querySelector(".outer_div").append(profile_div);

        let profile_image = document.createElement("div")
        profile_image.setAttribute("class","profile_image")
        document.querySelector(".profile_box").append(profile_image)

        let profileimage = document.createElement("img")
        profileimage.setAttribute("id", "user_profile")
        profileimage.setAttribute("src", item.image_url);
        document.querySelector(".profile_image").append(profileimage);

        let username=document.createElement("p")
        username.setAttribute("id","user_name")
        username.innerHTML=item.Firstname+" "+item.lastname
        document.querySelector(".profile_image").append(username);

        let details=document.createElement("div")
        details.setAttribute("class","details")
        document.querySelector(".profile_box").append(details); 

        let useremail=document.createElement("div")
        useremail.setAttribute("class","email")
        document.querySelector(".details").append(useremail)

        let email_para=document.createElement("p")
        email_para.innerHTML="Email"
        document.querySelector(".email").append(email_para);

        let email_para2=document.createElement("p")
        email_para2.innerHTML=item.email
        document.querySelector(".email").append(email_para2);

        let useraddress=document.createElement("div")
        useraddress.setAttribute("class","address")
        document.querySelector(".details").append(useraddress);

        let address_para=document.createElement("p")
        address_para.innerHTML="Address"
        document.querySelector(".address").append(address_para);

        let address_para2=document.createElement("p")
        address_para2.innerHTML=item.communication.address
        document.querySelector(".address").append(address_para2);

        let userphone=document.createElement("div")
        userphone.setAttribute("class","phone")
        document.querySelector(".details").append(userphone);

        let phone_para=document.createElement("p")
        phone_para.innerHTML="Phone"
        document.querySelector(".phone").append(phone_para);

        let phone_para2=document.createElement("p")
        phone_para2.innerHTML=item.communication.mobile_number
        document.querySelector(".phone").append(phone_para2);


    }
    
});
    
    </script>

</body>

</html>