<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../assets/css/cart.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css"
        integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w=="
        crossorigin="anonymous" referrerpolicy="no-referrer">
    <title>Addtocart</title>
</head>

<body>
    <!-- header -->
    <header>

        <img class="logo" src="../assets/image/mainlogo.png" height="80px" width="250px" alt="img">
    
        <div class="menu-bar">
    
          <ul class="main">
            <li class="down">
<a class="hdg" href="../index.html">Home </a>
</li>
            <li class="down">
<a class="hdg" href="../html/about.html">About</a>
    
            </li>
    
            <li>
<a class="hdg" href="../html/profilepage.html">Profile</a>
</li>
    
          </ul>
        
        </div>
        
      </header>

    <div class="main_container">

        <!-- <div class="container">
            <div class="cart">
                <div class="top">
                    <h2>Shopping Cart</h2>
                    <h2 id="itemA">4 Items</h2>
                </div>
                <table cellspacing="0" class="table-head">
                    <tr>
                        <th width="150" class="head-img">Image</th>
                        <th width="360" class="head-img">Name</th>
                        <th width="150" class="head-img">Price</th>
                        <th width="150" class="head-img">Delete</th>
                    </tr>
                </table>
                <table id="root" cellspacing="0"></table>
                <div class="product_image">
                    <img class="img-box" src="../assets/image/tomato.jpg">
                    <p class="title">FreshOrganicTomato</p>
                    <p class="price">30</p>
                    <div class="input_div">
                        <button class="btn1 btn-decrement">-</button>
                        <input class="btn-input" id="quantity" type="text" value="1">
                        <button class="btn1 btn-increment">+</button>
                    </div>
                    <div class="total-amount">
                        <h2>Price:</h2>

                    </div>
                    <i id="bin-icon" class="fa-solid fa-trash"></i>
        
                </div>
                <hr>
            </div>
            <div class="summary">
                <div class="top">
                <h2>Order Summary</h2>
            </div>
            
            <div class="detail">
                <h2 id="itemB">4 Items</h2>
                <h2 id="totalA">₹ 30</h2>
            </div>
            <div style="margin-top: 30px; padding: 0 30px;">
                <h2>Shipping</h2>
                <input type="text" placeholder="standard deilivery">
                <h2>Promo Code</h2>
                <input type="text" placeholder="Enter Your code" id="promoCode">
                <button class="first-btn" id="promo" onclick="promo()">Apply</button>
            </div>
            <hr>
            <div class="top">
                <h2>Total</h2>
                <h2 id="totalB">₹ 30</h2>
            </div>
            <div style="padding: 0 10px; margin-bottom: 20px;">
                <button class="checkout">Check out</button>

            </div>
        </div>
        </div> -->

    </div>
    <script>        // Create the main container
        const mainContainer = document.createElement('div');
        mainContainer.classList.add('main_container');

        // Create the container
        const container = document.createElement('div');
        container.classList.add('container');

        // Create the cart section
        const cart = document.createElement('div');
        cart.classList.add('cart');

        // Create the top section of the cart
        const topSection = document.createElement('div');
        topSection.classList.add('top');

        const shoppingCartTitle = document.createElement('h2');
        shoppingCartTitle.innerText = 'Shopping Cart';

        const itemATitle = document.createElement('h2');
        itemATitle.id = 'itemA';
        itemATitle.innerText = '4 Items';

        topSection.appendChild(shoppingCartTitle);
        topSection.appendChild(itemATitle);

        cart.appendChild(topSection);

        // Create the table of the cart
        const tableHead = document.createElement('table');
        tableHead.classList.add('table-head');
        tableHead.setAttribute('cellspacing', '0');

        const tableHeadRow = document.createElement('tr');

        const imgHead = document.createElement('th');
        imgHead.classList.add('head-img');
        imgHead.setAttribute('width', '150');
        imgHead.innerText = 'Image';

        const nameHead = document.createElement('th');
        nameHead.classList.add('head-img');
        nameHead.setAttribute('width', '360');
        nameHead.innerText = 'Name';

        const priceHead = document.createElement('th');
        priceHead.classList.add('head-img');
        priceHead.setAttribute('width', '150');
        priceHead.innerText = 'Price';

        const quantityHead = document.createElement('th');
        quantityHead.classList.add('head-img');
        quantityHead.setAttribute('width', '150');
        quantityHead.innerText = 'Quantity';

        const deleteHead = document.createElement('th');
        deleteHead.classList.add('head-img');
        deleteHead.setAttribute('width', '150');
        deleteHead.innerText = 'Delete';

        tableHeadRow.appendChild(imgHead);
        tableHeadRow.appendChild(nameHead);
        tableHeadRow.appendChild(priceHead);
        tableHeadRow.appendChild(quantityHead);
        tableHeadRow.appendChild(deleteHead);

        tableHead.appendChild(tableHeadRow);

        cart.appendChild(tableHead);

        // Create the root table
        const rootTable = document.createElement('table');
        rootTable.setAttribute('cellspacing', '0');
        rootTable.id = 'root';

        cart.appendChild(rootTable);

        const cart_sample = JSON.parse(localStorage.getItem("cart")) ?? [];
        const user = JSON.parse(localStorage.getItem("active_user"));

        let total = 0;

        // cart_sample.find(e => {
        for (let i = 0; i < cart_sample.length; i++) {
            if (user.email == cart_sample[i].email) {

                total += Number(cart_sample[i].price);
                // console.log(e.price)

                const product_div = document.createElement("div")
                product_div.setAttribute("class", "product_image")
                cart.append(product_div)

                const product_image = document.createElement("img")
                product_image.setAttribute("class", "img-box")
                product_image.setAttribute("src", cart_sample[i].image)
                product_div.append(product_image);

                const title = document.createElement("p")
                title.setAttribute("class", "title")
                title.innerText = cart_sample[i].titlename;
                product_div.append(title)

                const cost = document.createElement("p")
                cost.setAttribute("class", "price")
                cost.innerText = cart_sample[i].price;
                product_div.append(cost)

                const quanty = document.createElement("p")
                quanty.setAttribute("class", "quanty")
                quanty.innerText = "1" + " " + "kg"
                product_div.append(quanty)

                decrement = document.createElement("button");
                decrement.setAttribute("class", "btn1 btn-decrement");
                decrement.innerText = "-"
                product_div.append(decrement)

                adding = document.createElement("input");
                adding.setAttribute("class", "btn-input")
                adding.setAttribute("id", "quantity")
                adding.setAttribute("type", "text")
                adding.setAttribute("value", "1")
                product_div.append(adding)

                increment = document.createElement("button")
                increment.setAttribute("class", "btn1 btn-increment")
                increment.innerText = "+"
                product_div.append(increment)

                sub_div = document.createElement("div")
                sub_div.setAttribute("class", "total-amount")
                product_div.append(sub_div)

                const delete_icon = document.createElement("i")
                delete_icon.setAttribute("id", "bin-icon")
                delete_icon.setAttribute("class", "fa-solid fa-trash")
                product_div.append(delete_icon)

                const break_tag = document.createElement("hr")
                break_tag.setAttribute("id", "break")
                product_div.append(break_tag)
                
                // // let valueCount = 1;
                // increment = document.querySelectorAll(".btn-increment");
                // decrement = document.querySelectorAll(".btn-decrement");
                // let count = document.querySelectorAll("#quantity");
                // let totalcount = document.querySelectorAll("#price");
                // let gramintokg = document.querySelectorAll(".gram");
                // let valueCount=0;

                // increment.forEach(function (obj) {
                //     // let valueCount=valueCnt;
                //     valueCount = 2
                //     obj.addEventListener("click", (e) => {//e.target
                //         // let check=0//

                //         // console.log(e.target.parentElement.parentElement.children[0].children[1].innerText)

                //         e.target.parentElement.children[1].value = valueCount
                //         e.target.parentElement.children[7].innerText = valueCount * 6;

                //         check = valueCount * 250//value
                //         //  console.log(check +"gfmdg")
                //         valueCount++;
                //         valueCnt = valueCount;
                //         if ((check >= "250")) {
                //             console.log(e.target.parentElement.parentElement.children[1].innerText)

                //             console.log(check)//g
                //             e.target.parentElement.parentElement.children[1].innerText = check + "g";

                //         }
                //         if (check >= 1000) {
                //             console.log(check)
                //             // gramintokg.innerText=kg
                //             let kg = Number(check) / 1000;
                //             e.target.parentElement.parentElement.children[1].innerText = kg + "kg"
                //             console.log("kilo" + kg)

                //         }

                //         //  qunatity,, total price..total kg
                //     })
                // })
                // increment

                // decrement.forEach(function (obj) {
                //     // let check1

                //     obj.addEventListener("click", (e) => {
                //         // if (valueCount >= 2) {
                //         //     let sub = --valueCount;
                //         //     count.value = sub;
                //         //     totalcount.innerHTML = sub * 6;
                //         //     check1 = check-250
                //         //     if(gramintokg.innerText>="1000g") {

                //         //     gramintokg.inneText = check1+"g";
                //         //     console.log(gramintokg)
                //         //     console.log(check1)
                //         //     }
                //         //     // if(check>=1000){

                //         //     // }
                //         // }

                //         valueCnt--
                //         // valueCnt--
                //         // valueCnt=valueCount;
                //         e.target.parentElement.children[1].value = valueCnt;
                //         console.log(valueCnt)
                //     })
                // })

                delete_icon.addEventListener("click", (e) => {
                    for (let j = 0; j < cart_sample.length; j++) {
                        if (user.email == cart_sample[i].email && cart_sample[i].titlename == cart_sample[j].titlename) {
                            cart_sample.splice(i, 1);
                            localStorage.setItem("cart", JSON.stringify(cart_sample));
                            location.reload();
                            break;
                        }
                    }
                })

            }
        }

        // Create the horizontal line
        const hr = document.createElement('hr');

        cart.appendChild(hr);

        // Create the summary section
        const summary = document.createElement('div');
        summary.classList.add('summary');

        // Create the top section of the summary
        const summaryTopSection = document.createElement('div');
        summaryTopSection.classList.add('top');

        const orderSummaryTitle = document.createElement('h2');
        orderSummaryTitle.innerText = 'Order Summary';

        summaryTopSection.appendChild(orderSummaryTitle);

        summary.appendChild(summaryTopSection);

        // Create the detail section of the summary
        const detail = document.createElement('div');
        detail.classList.add('detail');

        const itemBTitle = document.createElement('h2');
        itemBTitle.id = 'itemB';
        itemBTitle.innerText = '4 Items';

        const totalATitle = document.createElement('h2');
        totalATitle.id = 'totalA';
        totalATitle.innerText = '₹ 30';

        detail.appendChild(itemBTitle);
        detail.appendChild(totalATitle);

        summary.appendChild(detail);

        // Create the shipping and promo code section
        const shippingAndPromo = document.createElement('div');
        shippingAndPromo.style.marginTop = '30px';
        shippingAndPromo.style.padding = '0 30px';

        const shippingTitle = document.createElement('h2');
        shippingTitle.innerText = 'Shipping';

        const shippingInput = document.createElement('input');
        shippingInput.setAttribute("class","shippingInput")
        shippingInput.setAttribute('type', 'text');
        shippingInput.setAttribute('placeholder', 'Delivery Address');

        const promoCodeTitle = document.createElement('h2');
        promoCodeTitle.innerText = ' Mobile number';

        const promoCodeInput = document.createElement('input');
        promoCodeInput.setAttribute('type', 'number')
        promoCodeInput.setAttribute('minlength','10')
        promoCodeInput.setAttribute('maxlength','10')
        promoCodeInput.setAttribute('placeholder', 'Enter Your Mobile number');

        const button = document.createElement("button");
        button.setAttribute("class", "first-btn")
        button.setAttribute("id", "promo")
        button.setAttribute("onclick", "promo()")
        button.innerText = "Apply"

        const hr_2 = document.createElement("hr")

        shippingAndPromo.append(shippingTitle, shippingInput, promoCodeTitle, promoCodeInput, button, hr);
        summary.append(shippingAndPromo)

        const div = document.createElement("div")
        div.setAttribute("class", "top")

        const heading_2 = document.createElement("h2")
        heading_2.innerText = "Total"

        const heading_3 = document.createElement("h2")
        heading_3.setAttribute("id", "totalB")
        heading_3.innerText = "₹ 30"
        div.append(heading_2, heading_3)

        const style = document.createElement("div")
        style.style.marginBottom = '20px';
        style.style.padding = '0 10px';

        const button_2 = document.createElement("button")
        button_2.setAttribute("class", "checkout")
        button_2.innerText = "Check out"

        style.append(button_2)
        summary.append(div, style)

        container.append(cart)
        container.append(summary)

        document.querySelector(".main_container").append(container);

        // let increment=document.querySelector(".btn-increment")
        // promoCode

            // const product=[
            //     {
            //         image:"../assets/image/tomato.jpg",
            //         title:"FreshOrganicTomato",
            //         price:"30"
            //     },
            //     {
            //         image:"../assets/image/cabbage.png",
            //         title:"FreshOrganicCabbage",
            //         price:"30"
            //     },
            //     {
            //         image:"../assets/image/beetroot.jpg",
            //         title:"FreshOrganicCabbage",
            //         price:"30"
            //     }
            // ]

            // const categories=[...new Set(product.map((item)=>
            // {return item}
            // ))];
            // function delElement(a){
            //     categories.splice(a,1);
            //     displaycart();
            // }

            // function displaycart(){
            //     let j=0;
            //    document.getElementById("itemA").innerHTML=categories.length+"Items";
            //    document.getElementById("itemB").innerHTML=categories.length+"Items";
            //     if(categories.length==0){
            //         document.getElementById("root").innerHTML="Your Cart is empty";

            //     }
            //     else{
            //         document.getElementById("root").innerHTML=categories.map((items)=>{
            //             let {image,title,price}=items;
            //             return(
            //                 `<tr>
            //                     <td width="150"><div class="img-box"><img class="img" src=${image}></div></td>
            //                     <td width="360"><p style="font-size:15px;">${title}</p></td>
            //                     <td width="150"><h2 style="font-size:15px;color:red">₹${price}.00</h2></td>
            //                     <td width="70">`+"<i class='fa-solid fa-trash' onclick='delElement("+(j++)+")'></i></td>"+
            //                    ` </tr>`
            //             );
            //         }).join('');
            //     }
            // }
            // displaycart()
    </script>

</body>

</html>