<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../assets/css/buynow.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css"
        integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w=="
        crossorigin="anonymous" referrerpolicy="no-referrer">
    <title>Buynow</title>

</head>

<body>

    <div class="container">

        <form id="payment_details">

            <div class="row">

                <div class="col">

                    <h3 class="title">Shipping address</h3>

                    <!-- <div class="inputBox">
                        <span>full name :</span>
                        <input id="fullname" type="text" title="Firstname cannot contain number or space"
                            required="true" pattern="[A-Za-z]{1,32}">
                    </div>
                    <div class="inputBox">
                        <span>email :</span>
                        <input id="email" type="email"
                            pattern="^[a-zA-Z0-9][a-zA-Z0-9._%+-]*@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$"
                            title="Your password must be at least 8 characters long, contain at least one digit or special character, one uppercase letter, and one lowercase letter, and must not contain dots or newline characters."
                            required="true">
                    </div> -->
                    <div class="inputBox">
                        <span>address :</span>
                        <input id="address" type="text" title="Fill the address field" required="true">
                    </div>
                    <div class="inputBox">
                        <span>city :</span>
                        <input id="city" type="text" title="City field cannot be empty" required="true"
                            pattern="[A-Za-z]{1,32}">
                    </div>

                    <div class="flex">
                        <div class="inputBox">
                            <span>state :</span>
                            <input id="state" type="text" title="State field cannot be empty" required="true"
                                pattern="[A-Za-z]{1,32}">
                        </div>
                        <div class="inputBox">
                            <span>Pincode :</span>
                            <input id="pincode" type="number" minlength="5" maxlength="7"
                                title="Firstname cannot contain space" required="true">
                        </div>
                    </div>
                    <div class="inputBox">
                        <span >Mobile Number:</span>
                        <input id="mobilenumber" type="number" required="true">
                    </div>


                </div>

                <div class="col">

                    <h3 class="title">payment</h3>

                    <div class="inputBox">
                        <span>cards accepted :</span>
                        <img src="../assets/image/card_img.png" alt="">
                    </div>
                    <div class="inputBox">
                        <span>name on card :</span>
                        <input id="name_on_card" type="text" required="true">
                    </div>
                    <div class="inputBox">
                        <span>credit card number :</span>
                        <input id="creditcard" type="number" required="true">
                    </div>
                    <div class="inputBox">
                        <span class="mobile">Branch Name:</span>
                        <input id="branchname" type="text" required="true">
                    </div>

                </div>

            </div>



            <!-- <input type="submit" value="proceed to checkout" class="submit-btn" > -->
            <button class="submit-btn" type="submit">proceed to checkout</button>
        </form>

    </div>
    <!-- <div class="store"> -->
        <!-- <div class="box_div">
            <img src="../assets/image/tomato.jpg" alt="image">
            <h1>FreshorganicTomato</h1>
            <h2>₹ 50</h2>
        </div> -->

    <!-- </div> -->

    <script>
        const getdetails = document.getElementById("payment_details");
        getdetails.addEventListener("submit", (e) => {
            e.preventDefault();
            getdata()
        })

        const products = JSON.parse(localStorage.getItem('create_product'));


        const url = window.location.search;  //?name=FreshOrganicTomato
        console.log(url)
        const urls = new URLSearchParams(url)
        console.log(urls)//"name":"FreshOrganicTomato"
        const name = urls.get("name")
        console.log(name)//"FreshOrganicTomato"

        
       






        const get_buyerdetails = JSON.parse(localStorage.getItem("buyerdetails")) ?? [];

        function getdata() {
            // let name1 = document.getElementById("fullname").value;
            // let email = document.getElementById("email").value;
            const address = document.getElementById("address").value;
            const city = document.getElementById("city").value;
            const state = document.getElementById("state").value;
            const pincode = document.getElementById("pincode").value;
            const name_on_card = document.getElementById("name_on_card").value;
            const creditcard = document.getElementById("creditcard").value;
            const branchname = document.getElementById("branchname").value;
            const mobilenumber = document.getElementById("mobilenumber").value;
            const active_user = JSON.parse(localStorage.getItem("active_user"))

            get_buyerdetails.push({
                "fullname": active_user.Firstname,
                "email": active_user.email,
                address,
                city,
                state,
                pincode,
                name_on_card,
                creditcard,
                branchname,
                mobilenumber
            })

            localStorage.setItem("buyerdetails", JSON.stringify(get_buyerdetails));
            window.location.href = `../html/bankdet.html?name=${name}`;
        }


        //  let result;

        // if (name == (name)) {
        //     create_product = products.find((el) => {

        //         if (el.product_id == name) {
        //             return (result = el);
        //         }
        //         return (result = 0);
        //     });


        //     let div = document.createElement("div");
        //     div.setAttribute("class", "box_div");


        //     let image_veg = document.createElement("img");
        //     image_veg.setAttribute("class", "tomato");
        //     image_veg.setAttribute("src", result.image);
        //     div.append(image_veg);

        //     let heading1 = document.createElement("h1");
        //     heading1.setAttribute("class", "product_name");
        //     heading1.innerText = result.titlename;
        //     div.append(heading1);

        //     let heading2 = document.createElement("h2");
        //     heading2.setAttribute("class", "product_name");
        //     heading2.innerText = `₹${result.price}`;
        //     div.append(heading2);

        //     document.querySelector(".store").append(div);

        // }
    </script>

</body>

</html>